resources: - repo: self queue: name: Default demands: maven #Your build pipeline references an undefined variable named ‘Parameters.mavenPOMFile’. Create or edit the build pipeline for this YAML file, define the variable on the Variables tab. See https://go.microsoft.com/fwlink/?linkid=865972 steps: - task: colinsalmcorner.colinsalmcorner-buildtasks.replace-tokens-task.ReplaceTokens@1 displayName: 'Replace MySql service name and k8s namespace in Springboot config file' inputs: sourcePath: src/main/resources filePattern: '*.properties' tokenRegex: '__(\w+[.\w+]*)__' - task: Maven@2 displayName: 'Maven pom.xml' inputs: mavenPomFile: '$(Parameters.mavenPOMFile)' options: '-DskipITs' - task: CopyFiles@2 displayName: 'Copy Files to: $(build.artifactstagingdirectory)' inputs: SourceFolder: '$(system.defaultworkingdirectory)' Contents: | **/*.jar **/*.yaml TargetFolder: '$(build.artifactstagingdirectory)' - task: PublishBuildArtifacts@1 displayName: 'Publish Artifact: drop' inputs: PathtoPublish: '$(build.artifactstagingdirectory)' - task: DockerCompose@0 displayName: 'Build Container Image' inputs: azureSubscription: 'MTC SVC Team AIRS-Developer Platform (2f2316dc-c9f8-4ec9-a2bf-11cfef41e253)' azureContainerRegistry: '{"loginServer":"raagadmtcaccademy.azurecr.io", "id" : "/subscriptions/2f2316dc-c9f8-4ec9-a2bf-11cfef41e253/resourceGroups/mtcacademy/providers/Microsoft.ContainerRegistry/registries/raagadmtcaccademy"}' action: 'Build services' additionalImageTags: '$(Build.BuildNumber)' includeLatestTag: true - task: DockerCompose@0 displayName: 'Push container image to ACR' inputs: azureSubscription: 'MTC SVC Team AIRS-Developer Platform (2f2316dc-c9f8-4ec9-a2bf-11cfef41e253)' azureContainerRegistry: '{"loginServer":"raagadmtcaccademy.azurecr.io", "id" : "/subscriptions/2f2316dc-c9f8-4ec9-a2bf-11cfef41e253/resourceGroups/mtcacademy/providers/Microsoft.ContainerRegistry/registries/raagadmtcaccademy"}' action: 'Push services' additionalImageTags: '$(Build.BuildNumber)' includeLatestTag: true 